"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[542],{3905:(e,t,o)=>{o.d(t,{Zo:()=>i,kt:()=>h});var a=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,a,n=function(e,t){if(null==e)return{};var o,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=a.createContext({}),p=function(e){var t=a.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):c(c({},t),e)),o},i=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),d=p(o),h=n,m=d["".concat(s,".").concat(h)]||d[h]||u[h]||r;return o?a.createElement(m,c(c({ref:t},i),{},{components:o})):a.createElement(m,c({ref:t},i))}));function h(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=o.length,c=new Array(r);c[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,c[1]=l;for(var p=2;p<r;p++)c[p]=o[p];return a.createElement.apply(null,c)}return a.createElement.apply(null,o)}d.displayName="MDXCreateElement"},7289:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=o(7462),n=(o(7294),o(3905));const r={title:"Node Setup",slug:"/acurast-protocol/node-setup"},c=void 0,l={unversionedId:"acurast-protocol/node-setup",id:"acurast-protocol/node-setup",title:"Node Setup",description:"Step by step guide on how to setup an Acurast node for the Rococo testnet.",source:"@site/docs/acurast-protocol/node-setup.mdx",sourceDirName:"acurast-protocol",slug:"/acurast-protocol/node-setup",permalink:"/acurast-protocol/node-setup",draft:!1,editUrl:"https://github.com/acurast/acurast-docs/docs/acurast-protocol/node-setup.mdx",tags:[],version:"current",frontMatter:{title:"Node Setup",slug:"/acurast-protocol/node-setup"},sidebar:"docs",previous:{title:"Singularity & Mesh",permalink:"/acurast-protocol/modules/singularity-mesh"},next:{title:"Overview",permalink:"/integrations/introduction"}},s={},p=[{value:"Get the source code and build",id:"get-the-source-code-and-build",level:2},{value:"Run as a Collator",id:"run-as-a-collator",level:2}],i={toc:p};function u(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,a.Z)({},i,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Step by step guide on how to setup an Acurast node for the Rococo testnet."),(0,n.kt)("h2",{id:"get-the-source-code-and-build"},"Get the source code and build"),(0,n.kt)("p",null,"Clone the Acurast parachain source code from its Github repo:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"git clone https://github.com/Acurast/acurast-substrate.git\n")),(0,n.kt)("p",null,"Make sure to checkout the appropriate tag, ",(0,n.kt)("inlineCode",{parentName:"p"},"acurast-v0.1.1")," at the  time of writing."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"cd acurast-substrate\ngit checkout acurast-v0.1.1\n")),(0,n.kt)("p",null,"Before building, make sure the ",(0,n.kt)("a",{parentName:"p",href:"https://docs.substrate.io/install/rust-toolchain/"},"Rust toolchain is installed"),"."),(0,n.kt)("p",null,"Build the node:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"cargo build --release\n")),(0,n.kt)("p",null,"Then run the node:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"./target/release/acurast-node --rococo-runtime --bootnodes /ip4/138.201.85.115/tcp/40335/p2p/12D3KooWAYwTLAQu47uBmCvA1uYpJs7ND1mkoCJTdU1Z6VYqgTp1 --parachain-id 2239 --base-path /tmp/para/acurast --port 40335 --ws-port 8846 --rpc-port 8082 --unsafe-ws-external --rpc-methods=unsafe --rpc-external --rpc-cors=all -- --execution wasm --chain rococo.json --port 30345 --ws-port 9979\n")),(0,n.kt)("p",null,"Replace the ",(0,n.kt)("inlineCode",{parentName:"p"},"/tmp/para/acurast")," path to the location you want the chain data to be stored in. Also adapt the port numbers and the rpc/websocket options as necessary."),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"rococo.json")," file in the command above needs to be the Rococo chain spec and can be downloaded ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/paritytech/polkadot/tree/master/node/service/chain-specs"},"here"),"."),(0,n.kt)("h2",{id:"run-as-a-collator"},"Run as a Collator"),(0,n.kt)("p",null,"To run as a collator, first start the node, by adding the ",(0,n.kt)("inlineCode",{parentName:"p"},"--collator")," flag to the command used to run the node, e.g.:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"./target/release/acurast-node --collator --rococo-runtime --bootnodes /ip4/138.201.85.115/tcp/40335/p2p/12D3KooWAYwTLAQu47uBmCvA1uYpJs7ND1mkoCJTdU1Z6VYqgTp1 --parachain-id 2239 --base-path /tmp/para/acurast --port 40335 --ws-port 8846 --rpc-port 8082 --unsafe-ws-external --rpc-methods=unsafe --rpc-external --rpc-cors=all -- --execution wasm --chain rococo.json --port 30345 --ws-port 9979\n")),(0,n.kt)("p",null,"Then, setup the Nimbus ID of the collator by calling the ",(0,n.kt)("inlineCode",{parentName:"p"},"author_rotateKeys")," rpc as follow:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},'curl http://127.0.0.1:8082 -H \\\n"Content-Type:application/json;charset=utf-8" -d \\\n  \'{\n    "jsonrpc":"2.0",\n    "id":1,\n    "method":"author_rotateKeys",\n    "params": []\n  }\'\n')),(0,n.kt)("p",null,"The collator node should respond with the public key of your new session key, the 64 hexadecimal characters after the 0x prefix represent your Nimbus ID, e.g.:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},'{"jsonrpc": "2.0", "result": "0x72c7ca7ef07941a3caeb520806576b52cb085f7577cc12cd36c2d64dbf73757", "id": 1}\n')),(0,n.kt)("p",null,'"0x72c7ca7ef07941a3caeb520806576b52cb085f7577cc12cd36c2d64dbf73757" is the Nimbus public key to be used in the following step.'),(0,n.kt)("p",null,"Then, make sure to have at least 20,010 ACRST tokens: 20,000 ACRST to join the candidates pool and 10 ACRST for extrinsics fees, please request that amount to Acurast Team on Discord or Telegram."),(0,n.kt)("p",null,"After that open the Polkadot JS apps wallet and connect to Acurast Testnet on Rococo Relaychain (",(0,n.kt)("a",{parentName:"p",href:"https://polkadot.js.org/apps/#/explorer"},"https://polkadot.js.org/apps/#/explorer"),'), then go to:\nDeveloper --\x3e extrinsic --\x3e select the account you are willing to use for your collator --\x3e select "session" pallet --\x3e select "setKeys" --\x3e copy-paste the Nimbus key obtained before on "keys" field --\x3e put "0x00" on "proof" field --\x3e click on "Submit Transaction" and sign the extrinsic --\x3e wait for block confirmation'),(0,n.kt)("p",null,'Then, go to:\nDeveloper --\x3e JavaScript --\x3e create new script or just delete an existing one --\x3e copy-paste the following script --\x3e click on "Play" button --\x3e take a note of the "Candidate pool size" (you will need it in the next step)'),(0,n.kt)("p",null,"Get candidatePool size script"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"// Simple script to get candidate pool size\nconst candidatePool = await api.query.parachainStaking.candidatePool();\nconsole.log(Candidate pool size is: ${candidatePool.length});\n")),(0,n.kt)("p",null,'Then go to:\nDeveloper --\x3e extrinsic --\x3e select the account you are willing to use for your collator --\x3e select "parachainStaking" pallet --\x3e select "joinCandidates" --\x3e put "20000000000000000" on "bond" field --\x3e put "Candidate pool size" number as noted before on "candidateCount" field --\x3e click on "Submit Transaction" and sign the extrinsic --\x3e wait for block confirmation'),(0,n.kt)("p",null,'Congrats! Your collator should be joined the candidates pool, if there are free slots available in the active set, your collator should start producing blocks at the beginning of next session.\nThe team will control the number of candidates and will increase the "totalSelected" amount in order to allow everyone to be active in the set, at opposite you will need more tokens in order to overcome the last one in the list and become an active collator.'))}u.isMDXComponent=!0}}]);